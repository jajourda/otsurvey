"use strict";angular.module("otsurvey",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngRoute","ui.bootstrap","route-segment","view-segment","prismic.io"]).config(["$routeSegmentProvider","$routeProvider",function($routeSegmentProvider,$routeProvider){var rsp=$routeSegmentProvider;rsp.when("/","main"),rsp.when("/about","about"),rsp.when("/contact","contact"),rsp.segment("main",{templateUrl:"app/main/main.html",controller:"MainCtrl",resolve:{initialData:function(MainControllerInitialData){return MainControllerInitialData()}}}),rsp.segment("about",{templateUrl:"app/about/about.html",controller:"AboutCtrl"}),rsp.segment("contact",{templateUrl:"app/contact/contact.html",controller:"ContactCtrl"}),$routeProvider.otherwise({redirectTo:"/"})}]).config(["PrismicProvider",function(PrismicProvider){PrismicProvider.setApiEndpoint("https://ot-survey.prismic.io/api"),PrismicProvider.setLinkResolver(function(ctx,doc){return"detail.html?id="+doc.id+"&slug="+doc.slug+ctx.maybeRefParam})}]),angular.module("otsurvey").controller("NavbarCtrl",["$scope","$document","$rootScope",function($scope,$document,$rootScope){$scope.date=new Date,console.log("get element by id: navbar:"),console.log($document[0].getElementById("navbar"));var navbar=$document[0].getElementById("navbar");navbar=angular.element(navbar),console.log("i am navbar :"),console.log(navbar.prop("offsetHeight")),$rootScope.navbarHeight=navbar.prop("offsetHeight"),console.log("navbarHeight:"),console.log($rootScope)}]),angular.module("otsurvey").factory("QueryPrismicDocument",["$q","Prismic","$rootScope",function($q,Prismic,$rootScope){return{broadcastLoad:function(elementName){var loadEvent=elementName+"Loaded";console.log("i am loadEvent"),console.log(loadEvent),$rootScope.$broadcast(loadEvent)},query:function(query,elementName){return $q.when(Prismic.query(query).then(function(data){var resultingDocuments=data.results,filteredFragments=[];return angular.forEach(resultingDocuments,function(result){result.newFragments={};var keys=_.keysIn(result.fragments);angular.forEach(keys,function(key){var hasProperty=_.has(result.fragments,key),singleResult=_.result(result.fragments,key);if(hasProperty){var newKey=key.replace(elementName+".","");result.newFragments[newKey]=singleResult}}),filteredFragments.push(result.newFragments)}),filteredFragments}))}}}]),angular.module("otsurvey").factory("MainControllerInitialData",["QueryPrismicDocument","$q",function(QueryPrismicDocument,$q){return function(){var qpd=QueryPrismicDocument,blog=qpd.query('[[:d = at(document.type, "blog")]]',"blog"),article=qpd.query('[[:d = at(document.type, "article")][:d = any(document.tags, ["course"])]]',"article");return console.log("i am MainControllerInitialData.service.js"),$q.all([blog,article]).then(function(results){return{blog:results[0],article:results[1]}})}}]),angular.module("otsurvey").controller("MainCtrl",["$scope","initialData",function($scope,initialData){console.log("i am at the top of the pack"),console.log("i am initialData:"),console.log(initialData),$scope.articles=initialData.article,$scope.currentCourse="Old Testament 2: History and Writings"}]),angular.module("otsurvey").controller("ContactCtrl",["$scope",function($scope){$scope.heading="Contact Me"}]),angular.module("otsurvey").controller("AboutCtrl",["$scope",function($scope){$scope.heading="About OT Survey"}]),angular.module("otsurvey").run(["$templateCache",function($templateCache){$templateCache.put("app/about/about.html","<h1>{{heading}}</h1>"),$templateCache.put("app/contact/contact.html","{{heading}}"),$templateCache.put("app/main/main.html",'<div class="shaped-container main-div"><div class="shaped"></div><div class="shaped left"></div><div class="shaped-content"><h1>OT Survey @ JICC</h1><p class="lead">I delivered to you of first importance...,</p><p class="lead"><strong class="focus">CHRIST</strong></p><p class="lead">according to the Old Testament Scriptures.</p><p class="lead"><em>1 Cor. 15.3-4</em></p><div class="current-wrap"><div class="current"><strong>Current OT Course:</strong></div><h2>{{currentCourse}}</h2></div><div class="course-list-wrap"><div class="course-list"><ol><li ng-repeat="article in articles | orderBy: \'priority.value\'"><div><span class="article-title" prismic-html="" fragment="article.title"></span></div><div><span class="article-long-lede" prismic-html="" fragment="article.longlede"></span></div></li></ol></div></div></div></div>'),$templateCache.put("app/components/navbar/navbar.html",'<nav id="navbar" class="navbar navbar-fixed-top navbar-inverse" ng-controller="NavbarCtrl"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" href="http://jicc.us/sundayschool"><span class="glyphicon glyphicon-home"></span> JICC Sunday School</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav"><li class="active"><a ng-href="#/">Home</a></li><li><a ng-href="#/about">About</a></li><li><a ng-href="#/contact">Contact</a></li></ul><ul class="nav navbar-nav navbar-right"><li>Current date: {{ date | date:\'yyyy-MM-dd\' }}</li></ul></div></div></nav>')}]);